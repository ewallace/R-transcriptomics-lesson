---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 03-reshaping-data.md in _episodes_rmd/
title: "Reshaping data with the tidyverse"
author: "Data Carpentry contributors"
teaching: 15
exercises: 15
objectives:
- "Reshape data from wide to long using `pivot_longer()`."
- "Appreciate how data can be transformed from untidy to tidy."

keypoints:
- "Use the `tidyr` package to manipulate dataframes."
- "Pivot functions `pivot_longer()` and `pivot_wider()` can make tidy data."
source: Rmd
---




~~~
Warning: package 'tidyverse' was built under R version 4.0.2
~~~
{: .error}



~~~
Error: package or namespace load failed for 'tidyverse' in dyn.load(file, DLLpath = DLLpath, ...):
 unable to load shared object '/Library/Frameworks/R.framework/Versions/4.0/Resources/library/Rcpp/libs/Rcpp.so':
  dlopen(/Library/Frameworks/R.framework/Versions/4.0/Resources/library/Rcpp/libs/Rcpp.so, 6): Symbol not found: _EXTPTR_PTR
  Referenced from: /Library/Frameworks/R.framework/Versions/4.0/Resources/library/Rcpp/libs/Rcpp.so
  Expected in: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libR.dylib
 in /Library/Frameworks/R.framework/Versions/4.0/Resources/library/Rcpp/libs/Rcpp.so
~~~
{: .error}



~~~
Error in read_tsv(gene_name_file, comment = "#") %>% select(Gene = gene, : could not find function "%>%"
~~~
{: .error}



~~~
Error in read_tsv("ftp://ftp.ncbi.nlm.nih.gov/geo/series/GSE81nnn/GSE81932/suppl/GSE81932_Dataset01.txt.gz"): could not find function "read_tsv"
~~~
{: .error}



~~~
Error in names(mRNA_data)[1] <- "SystematicName": object 'mRNA_data' not found
~~~
{: .error}



~~~
Error in left_join(mRNA_data, gene_names): could not find function "left_join"
~~~
{: .error}

------------

> ### Learning Objectives
>
> * Reshape a tibble
> * Understand pivot_longer and pivot_wider, and how they can help tidy up data


------------


## Reshape/tidy the data


~~~
pivot_longer(mRNA_data, 
             cols = !c(SystematicName,Gene), 
             names_to = "Vol", 
             values_to = "log2_ratio")
~~~
{: .language-r}



~~~
Error in pivot_longer(mRNA_data, cols = !c(SystematicName, Gene), names_to = "Vol", : could not find function "pivot_longer"
~~~
{: .error}


~~~
mRNA_data_tidy <- 
    pivot_longer(mRNA_data, 
                 cols = !c(SystematicName,Gene), 
                 names_to = "Vol", 
                 values_to = "log2_ratio")%>%
    separate(Vol,into="Vol_fL") %>%
    mutate(Vol_fL = as.numeric(Vol_fL))
~~~
{: .language-r}



~~~
Error in pivot_longer(mRNA_data, cols = !c(SystematicName, Gene), names_to = "Vol", : could not find function "%>%"
~~~
{: .error}



~~~
mRNA_data_tidy
~~~
{: .language-r}



~~~
Error in eval(expr, envir, enclos): object 'mRNA_data_tidy' not found
~~~
{: .error}

## Write it out.


~~~
write_csv(mRNA_data_tidy, "../data/mRNA_data_tidy_named.csv")
~~~
{: .language-r}



~~~
Error in write_csv(mRNA_data_tidy, "../data/mRNA_data_tidy_named.csv"): could not find function "write_csv"
~~~
{: .error}


~~~
mRNA_data_NOP16 <- filter(mRNA_data_tidy, Gene=="NOP16")
~~~
{: .language-r}



~~~
Error in as.ts(x): object 'mRNA_data_tidy' not found
~~~
{: .error}



~~~
mRNA_data_NOP16
~~~
{: .language-r}



~~~
Error in eval(expr, envir, enclos): object 'mRNA_data_NOP16' not found
~~~
{: .error}


{% include links.md %}
